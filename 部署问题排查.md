# 🔍 部署问题排查指南

## 问题：部署后打不开链接

### 📋 排查步骤

#### 1. 检查部署状态

1. **访问 Vercel Dashboard**：https://vercel.com/dashboard
2. **点击你的项目**
3. **查看 "Deployments" 标签**
4. **检查最新部署的状态**：
   - ✅ **Ready** - 部署成功
   - ⏳ **Building** - 正在构建
   - ❌ **Error** - 部署失败（需要查看错误日志）

#### 2. 如果部署失败（显示 Error）

1. **点击失败的部署记录**
2. **查看 "Build Logs"**（构建日志）
3. **常见错误**：
   - 构建命令失败
   - 依赖安装失败
   - TypeScript 错误
   - 环境变量缺失

#### 3. 如果部署成功但打不开

**可能原因 1：浏览器缓存**
- 尝试**硬刷新**：`Ctrl + Shift + R`（Windows）或 `Cmd + Shift + R`（Mac）
- 或使用**无痕模式**访问

**可能原因 2：路由配置问题**
- 检查 `vercel.json` 是否正确配置了 rewrites
- 确保所有路由都重定向到 `index.html`

**可能原因 3：构建输出目录错误**
- 检查 Vercel 项目设置中的 "Output Directory" 是否为 `dist`

**可能原因 4：网络问题**
- 尝试使用不同的网络
- 检查是否被防火墙拦截

---

## 🔧 解决方案

### 方案 1：检查并修复 vercel.json

确保 `vercel.json` 配置正确：

```json
{
  "buildCommand": "npm run build",
  "outputDirectory": "dist",
  "rewrites": [
    {
      "source": "/(.*)",
      "destination": "/index.html"
    }
  ]
}
```

### 方案 2：在 Vercel 项目设置中检查

1. **进入项目设置** → **General**
2. **检查以下配置**：
   - **Framework Preset**: `Vite`
   - **Build Command**: `npm run build`
   - **Output Directory**: `dist`
   - **Install Command**: `npm install`

### 方案 3：重新部署

1. **在 Vercel Dashboard 中**：
   - 点击项目 → **Deployments**
   - 找到失败的部署
   - 点击 **"..."** → **"Redeploy"**

2. **或通过 Git 推送触发重新部署**：
   ```powershell
   git commit --allow-empty -m "Trigger redeploy"
   git push
   ```

### 方案 4：检查浏览器控制台

1. **打开部署的网站**
2. **按 F12 打开开发者工具**
3. **查看 Console 标签**，看是否有错误信息
4. **查看 Network 标签**，检查资源加载情况

---

## 📝 常见错误及解决方法

### 错误 1：404 Not Found

**原因**：路由配置不正确

**解决**：确保 `vercel.json` 中有 rewrites 配置

### 错误 2：空白页面

**原因**：
- JavaScript 文件加载失败
- 路径配置错误

**解决**：
1. 检查浏览器控制台错误
2. 检查 `vite.config.ts` 中的 `base` 配置（应该为空或 `/`）

### 错误 3：构建失败

**原因**：
- TypeScript 错误
- 依赖缺失
- 环境变量未配置

**解决**：
1. 本地运行 `npm run build` 检查是否有错误
2. 修复所有构建错误
3. 重新推送代码

---

## ✅ 验证清单

在 Vercel Dashboard 中检查：

- [ ] 部署状态为 "Ready"（绿色）
- [ ] 构建日志没有错误
- [ ] 项目设置中的 Output Directory 为 `dist`
- [ ] Framework Preset 为 `Vite`
- [ ] `vercel.json` 文件存在且配置正确

---

## 🆘 如果还是无法解决

1. **查看 Vercel 文档**：https://vercel.com/docs
2. **检查 Vercel 状态**：https://vercel-status.com
3. **联系 Vercel 支持**：在 Dashboard 中点击 "Help"

---

## 💡 快速测试

在本地测试生产构建：

```powershell
# 构建
npm run build

# 预览
npm run preview
```

如果本地预览正常，但部署后不行，可能是 Vercel 配置问题。


